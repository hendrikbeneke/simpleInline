/*
 *  jQuery Simple Inline Edit - v0.1.2
 *  A simple plugin for inline edit using contenteditable.
 *  http://hendrikbeneke.com
 *
 *  Made by Hendrik Beneke
 *  Under MIT License
 */
!function(a,b,c){"use strict";function d(b,c){this.element=b instanceof a?b:a(b);var d=e(b);this.settings=a.extend({},i,d,c),this._defaults=i,this._name=h,this.init()}function e(b){var c=a(b).data(),d={};for(var e in c){var g=f(e);d[g]=c[e]}return d}function f(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})}var g="\n",h="simpleInline",i={allowLineBreaks:!1,valueChanged:function(){},attributeName:""};d.prototype={init:function(){this.settings.allowLineBreaks&&this.convertBrToLf(this.element),this.setDefaultEvents(),this.setPlaceholderAttribute(),this.setPlaceholderAction()},setDefaultEvents:function(){var b=this,c=b.settings.allowLineBreaks?"editing-block":"editing";this.element.on("click.editable",function(){a(this).addClass(c),a(this).attr("contenteditable",!0),a(this).focus()}),this.element.on("blur.editable",function(){a(this).removeClass(c),a(this).attr("contenteditable",!1),b.clearContentIfEmpty(this),b.settings.valueChanged.call(b,b.getValue(),b.settings.attributeName)}),this.element.on("keydown.editable",function(c){13===c.keyCode&&(c.preventDefault(),b.settings.allowLineBreaks?b.pasteIntoInput(g):a(this).blur())})},setPlaceholderAttribute:function(){this.settings.placeholder&&this.element.attr("data-inline-placeholder-text",this.settings.placeholder)},setPlaceholderAction:function(){var b=this.element,c=this.hasPlaceholder;this.hasPlaceholder&&(a.trim(b.text())||b.addClass("inline-placeholder"),b.focusin(function(){b.hasClass("inline-placeholder")&&b.removeClass("inline-placeholder")}).focusout(function(){c&&!a.trim(b.text())&&b.addClass("inline-placeholder")}))},hasPlaceholder:function(){return!!this.element.data("inline-placeholder-text")},getValue:function(){return this.settings.allowLineBreaks?this.element.text():this.element.text()},convertBrToLf:function(a){a.html(a.html().replace(/<br\s*[\/]?>/gi,g))},pasteIntoInput:function(a){var d,e;if(b.getSelection&&(d=b.getSelection(),d.getRangeAt&&d.rangeCount)){e=d.getRangeAt(0),e.deleteContents();var f=c.createElement("div");f.innerHTML=a;for(var g,h,i=c.createDocumentFragment();g=f.firstChild;)h=i.appendChild(g);e.insertNode(i),h&&(e=e.cloneRange(),e.setStartAfter(h),e.collapse(!0),d.removeAllRanges(),d.addRange(e))}},clearContentIfEmpty:function(b){""===a.trim(a(b).text())&&a(b).empty()}},a.fn[h]=function(b){return this.each(function(){a.data(this,"plugin_"+h)||a.data(this,"plugin_"+h,new d(this,b))})}}($,window,document);