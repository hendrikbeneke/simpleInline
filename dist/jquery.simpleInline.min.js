/*
 *  jQuery Simple Inline Edit - v0.1.1
 *  A simple plugin for inline edit using contenteditable.
 *  http://hendrikbeneke.com
 *
 *  Made by Hendrik Beneke
 *  Under MIT License
 */
!function(a,b,c){"use strict";function d(b,c){this.element=b instanceof a?b:a(b);var d=e(b);this.settings=a.extend({},i,d,c),this._defaults=i,this._name=h,this.init()}function e(b){var c=a(b).data(),d={};for(var e in c){var g=f(e);d[g]=c[e]}return d}function f(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})}var g="\n",h="simpleInline",i={allowLineBreaks:!1,valueChanged:function(a){console.log(a)}};d.prototype={init:function(){this.settings.allowLineBreaks&&this.convertBrToLf(this.element),this.setDefaultEvents(),this.setPlaceholderAttribute(),this.setPlaceholderAction()},setDefaultEvents:function(){var b=this,c=b.settings.allowLineBreaks?"editing-block":"editing";this.element.on("click.editable",function(){a(this).addClass(c),a(this).attr("contenteditable",!0),a(this).focus()}),this.element.on("blur.editable",function(){a(this).removeClass(c),a(this).attr("contenteditable",!1),b.clearContentIfEmpty(this),b.settings.valueChanged.call(b,b.getValue())}),this.element.on("keydown.editable",function(c){13===c.keyCode&&(c.preventDefault(),b.settings.allowLineBreaks?b.pasteIntoInput(g):a(this).blur())})},setPlaceholderAttribute:function(){this.settings.placeholder&&this.element.attr("data-inline-placeholder-text",this.settings.placeholder)},setPlaceholderAction:function(){var a=this.element,b=this.hasPlaceholder;this.hasPlaceholder&&(a.text().trim()||a.addClass("inline-placeholder"),a.focusin(function(){a.hasClass("inline-placeholder")&&a.removeClass("inline-placeholder")}).focusout(function(){b&&!a.text().trim()&&a.addClass("inline-placeholder")}))},hasPlaceholder:function(){return!!this.element.data("inline-placeholder-text")},getValue:function(){return this.settings.allowLineBreaks?this.element.text():this.element.text()},convertBrToLf:function(a){a.html(a.html().replace(/<br\s*[\/]?>/gi,g))},pasteIntoInput:function(a){c.execCommand("insertHTML",!1,a)},clearContentIfEmpty:function(b){""===a(b).text().trim()&&a(b).empty()}},a.fn[h]=function(b){return this.each(function(){a.data(this,"plugin_"+h)||a.data(this,"plugin_"+h,new d(this,b))})}}($,window,document);